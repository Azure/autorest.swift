@using System.Collections.Generic;
@using System.Linq;
@using System.Text;
@using System;
@using AutoRest.Core.Model
@using AutoRest.Core.Utilities
@using AutoRest.Swift
@using AutoRest.Swift.Model

@inherits AutoRest.Core.Template<AutoRest.Swift.Model.MethodSwift>

@WrapComment("// ", Model.Name + " " + Model.Description.ToSentence())
class @(Model.CommandModelName) {
    var client: @Model.ServiceModelName
    var method = "@(Model.HttpMethod)"
    var isLongRunningOperation = @(Model.IsLongRunningOperation() ? "true" : "false")
    let path = "@(Model.Url)"
    private var pathParameters = [String: String]()
    private var queryParameters = [String: String]()
    private var headerParameters = [String: String]()
@for (var i = 0; i < Model.URLParameters.Count; i++)
{
    @EmptyLine
    var param = Model.URLParameters[i];
    <text>
    var @($"{param.VariableName}") : @($"{param.VariableTypeDeclaration}") {
        set {
            pathParameters["@($"{param.VariableName}")"] = String(newValue!)
        }
        get {
            return @($"{param.VariableTypeDeclaration}")(pathParameters["@($"{param.VariableName}")"])
        }
    }
    </text>
}
@for(var i = 0; i < Model.QueryParameters.Count; i++) {
    @EmptyLine
    var param = Model.QueryParameters[i];
<text>
    var @($"{param.VariableName}") : @($"{param.VariableTypeDeclaration}") {
        set {
            queryParameters["@($"{param.VariableName}")"] = String(newValue!)
        }
        get {
            return @($"{param.VariableTypeDeclaration}")(queryParameters["@($"{param.VariableName}")"])
        }
     }
</text>
}
@for (var i = 0; i < Model.HeaderParameters.Count; i++)
{
    @EmptyLine
    var param = Model.HeaderParameters[i];
    <text>
    var @($"{param.VariableName}") : @($"{param.VariableTypeDeclaration}") {
        set {
            headerParameters["@($"{param.VariableName}")"] = String(newValue!)
        }
        get {
            return @($"{param.VariableTypeDeclaration}")(headerParameters["@($"{param.VariableName}")"])
        }
    }
    </text>
}

@if (Model.BodyParameter != null)
{
    var param = Model.BodyParameter;
    @EmptyLine
    <text>
    var @($"{param.VariableName}") :  @($"{param.VariableTypeDeclaration}")
    </text>
}
@EmptyLine
    var returnFunc : { (decoder: Decoder, jsonData: String) -> 
@if (!"void".Equals(Model.ReturnTypeDeclaration(), StringComparison.OrdinalIgnoreCase))
{
<text>
        return try decoder.decode(@(Model.ReturnTypeDeclaration()).self, jsonData)
</text>
}else
{
<text>
        return nil
</text>
}
    }
@EmptyLine
    init(client: @(Model.ServiceModelName)) {
        self.client = client
    }
    @EmptyLine
    func execute() -> @($"{Model.ReturnTypeDeclaration()}") {
        return self.client.execute<@($"{Model.ReturnTypeDeclaration()}")>(self, @(Model.BodyParameter != null ? $"{Model.BodyParameter.VariableName}" : "nil"))
    }
}
